<!DOCTYPE html>
<html lang="es"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>FilmFeel</title>

    <div th:insert="fragments/_resources :: _head_resources"></div>

    <link rel="stylesheet" th:href="@{/styles.css}">


</head>
<body>


<nav th:replace="fragments/_fragments :: nav_bar"></nav>
<div class="container mt-4">
    <div class="form form-person">
        <div class="mb-3 ">
            <form action="" method="post" th:object="${person}" enctype="multipart/form-data">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <div class="mb-3">
                    <label for="name" class="form-label label-newperson">Nombre</label>
                    <input id="name" type="text" placeholder="Nombre" class="form-control"
                           th:field="*{name}">

                    <div class="invalid-feedback"
                         th:if="${#fields.hasErrors('name')}"
                         th:errors="*{name}"></div>

                </div>
                <div class="mb-3">
                    <label for="surname" class="form-label label-newperson ">Apellidos</label>
                    <input id="surname" type="text" placeholder="Apellidos" class="form-control"
                           th:field="*{surname}">

                    <div class="invalid-feedback"
                         th:if="${#fields.hasErrors('surname')}"
                         th:errors="*{surname}"></div>

                </div>
                <div class="mb-3">
                    <label for="typePerson" class="form-label label-newperson">Tipo de Persona</label>
                    <select id="typePerson" class="form-control" th:field="*{typePerson}">
                        <option th:each="typePerson : ${typePersonEnum}" th:value="${typePerson}"
                                th:text="${typePerson}"></option>
                    </select>
                    <div class="invalid-feedback" th:if="${#fields.hasErrors('typePerson')}"
                         th:errors="*{typePerson}"></div>
                </div>


                <div class="text-end">
                    <a th:href="@{/}" class="btn btn-warning mt-4 me-2 mb-4 ">Volver a inicio</a>
                    <button type="submit" class="btn btn-success mt-4 me-2 mb-4">Guardar</button>
                    <a th:href="@{/personas}" class="btn btn-info mt-4 me-2 mb-4">Ir a personas</a>

                </div>


            </form>
        </div>


    </div>
</div>


<div layout:fragment="content" class="container my-5">
</div>

<div th:insert="fragments/_resources :: _foot_resources"></div>
<script>
    $(document).ready(function() {
        $('.select2').select2();
    });

</script>

<div layout:fragment="scripts" th:remove="tag"></div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Simulación del estado de sesión. Cambia esto según tu lógica de autenticación.
        var userLoggedIn = true; // Cambia a false para simular usuario desconectado.

        if (userLoggedIn) {
            document.getElementById("userLoggedIn").style.display = "inline";
            document.getElementById("userLoggedOut").style.display = "none";
        } else {
            document.getElementById("userLoggedIn").style.display = "none";
            document.getElementById("userLoggedOut").style.display = "inline";
        }
    });
</script>
<footer th:replace="fragments/_fragments :: _footer"></footer>
</body>
</html>